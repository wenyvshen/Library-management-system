# 图书管理系统（Console / C++17）

## 项目概述
一个基于 C++17 的命令行图书管理系统，包含图书、用户、借阅历史的基本增删查改与持久化。控制台默认输出 UTF-8，菜单交互为中文。

## 代码结构
- `Libraryv2.0.cpp`：程序入口与菜单循环。
- `LibBook.h/.cpp`：`Book` 类，包含 ISBN、书名、作者、库存及展示接口。
- `LibUser.h/.cpp`：`User` 类，包含用户名、密码、登录状态、借阅历史（最多 100 条）。
- `LibSystem.h/.cpp`：`System` 类，负责用户/图书的增删查、登录登出、搜索、借阅归还、读写文件。
- 数据文件：`Book.dat`、`User.dat`（二进制，固定长度字段，路径写死为 `F:\library\Library-management-system\`）。

## 功能点
- 用户：注册、登录、登出，借阅历史自动记录。
- 图书：添加（同 ISBN 合并库存）、展示全部、按书名关键词搜索、按作者搜索。
- 借阅/归还：借出减库存、归还加库存；借阅记录写入用户历史并持久化。
- 持久化：启动时加载 `Book.dat`/`User.dat`，每次增删/借还后写回。

## 构建与运行
依赖：CMake 3.10+，支持 C++17 的编译器（g++/clang++/MSVC）。

```bash
cmake -S . -B build
cmake --build build
```

生成的可执行文件位于 `build/`（如 `LibraryManager.exe`），运行前确保有写入 `F:\library\Library-management-system\` 的权限。

## 运行时菜单
```
1. 登录
2. 登出
3. 注册
4. 添加图书
5. 显示全部图书
6. 搜索图书
7. 借阅图书
8. 查看借阅记录
9. 归还图书
0. 退出
```

搜索方式：
- 书名关键词：子串匹配书名。
- 作者：按作者名精确匹配。

## 已知注意事项
- 数据文件路径是硬编码的绝对路径，如需移动项目，请同步修改 `LibSystem.cpp` 中的文件路径字符串。
- 借阅历史容量为 100 条，超过不会再写入。
- 控制台需使用 UTF-8，程序已在 `main` 内设置 `SetConsoleOutputCP(CP_UTF8)`、`SetConsoleCP(CP_UTF8)`。

## TODO / 后续计划
- 抽离配置（数据目录、容量上限）到独立配置文件。
- 完善异常与错误提示（文件权限、读写失败等）。
- 增加管理员角色与更精细的权限控制。

##开发笔记
- 初始版本完成于2025/10/27,现版本完成于2025/12/12(本人生日),在重构之时特意保留了原版本文件作为纪念